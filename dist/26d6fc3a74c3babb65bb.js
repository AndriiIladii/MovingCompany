import"../styles/main.scss";import translations from"./translations/translations.js";import axios from"axios";import Swiper from"swiper/bundle";import"swiper/css/bundle";import Swal from"sweetalert2";import flatpickr from"flatpickr";import"flatpickr/dist/flatpickr.min.css";AOS.init({once:!0});const counters=document.querySelectorAll(".counter span[data-count]"),container=document.querySelector(".statistic");let activated=!1;window.addEventListener("scroll",()=>{container&&(pageYOffset>container.offsetTop-container.offsetHeight-400&&!1===activated?(counters.forEach(e=>{e.innerText=0;let t=0;!function n(){const a=parseInt(e.dataset.count),o=Math.ceil(a/50);t<a?(t+=o,t>a&&(t=a),e.innerText=t,setTimeout(n,40)):e.innerText=a}()}),activated=!0):(pageYOffset<container.offsetTop-window.innerHeight||0===pageYOffset&&!0===activated)&&(counters.forEach(e=>{e.innerText=0}),activated=!1))});const swiper=new Swiper(".swiper",{direction:"horizontal",loop:!0,a11y:!1,autoplay:{delay:3e3,disableOnInteraction:!1},centeredSlides:!0,roundLengths:!0,observer:!0,observeParents:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1.15,spaceBetween:15},640:{slidesPerView:1.5,spaceBetween:70},1024:{slidesPerView:2.5,spaceBetween:70},1440:{slidesPerView:3,spaceBetween:90}}}),reviewsSwiper=new Swiper(".reviews-slider",{a11y:!1,loop:!0,centeredSlides:!0,autoplay:{delay:5e3,disableOnInteraction:!1},slidesPerView:1,spaceBetween:20,pagination:{el:".reviews-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,centeredSlides:!1},1024:{slidesPerView:3,centeredSlides:!0,spaceBetween:30}}}),autoSwiper=new Swiper(".auto-slider",{a11y:!1,loop:!0,slidesPerView:1,spaceBetween:50,centeredSlides:!0,autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".auto-slider-button-next",prevEl:".auto-slider-button-prev"},breakpoints:{320:{spaceBetween:80}}});flatpickr("#dateTime",{enableTime:!0,dateFormat:"d.m.Y H:i",minDate:"today",time_24hr:!0,disableMobile:"true",defaultHour:9,defaultMinute:0}),document.getElementById("telegramForm").addEventListener("submit",function(e){e.preventDefault();let t="<b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–µ—Ä–µ–µ–∑–¥! üöö</b>\n";t+=`<b>–ò–º—è:</b> ${document.getElementById("name").value.trim()}\n`,t+=`<b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${document.getElementById("phone").value.trim()}\n`,t+=`<b>–û—Ç–∫—É–¥–∞:</b> ${document.getElementById("addressFrom").value.trim()}\n`,t+=`<b>–ö—É–¥–∞:</b> ${document.getElementById("addressTo").value.trim()}\n`,t+=`<b>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</b> ${document.getElementById("dateTime").value.replace("T"," ")}`,axios.post("https://api.telegram.org/bot8534201234:AAFafvbo6FoNnCm3wkwc5K3IVff4bbKFAMk/sendMessage",{chat_id:"-5059325929",parse_mode:"html",text:t}).then(e=>{Swal.fire({title:"–°–ø–∞—Å–∏–±–æ!",text:"–í–∞—à–∞ –∑–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.",icon:"success",confirmButtonText:"–û—Ç–ª–∏—á–Ω–æ",confirmButtonColor:"#f97316"}),this.reset(),document.getElementById("dateTime").type="text"}).catch(e=>{console.warn(e),Swal.fire({title:"–û—à–∏–±–∫–∞!",text:"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",icon:"error",confirmButtonText:"–ó–∞–∫—Ä—ã—Ç—å",confirmButtonColor:"#d33"})})});const selectedLang=document.getElementById("selectedLang"),languageList=document.getElementById("languageList"),listItems=languageList.querySelectorAll("a");function translatePage(e){document.querySelectorAll("[data-i18n]").forEach(t=>{const n=t.getAttribute("data-i18n"),a=translations[e][n];a&&(t.hasAttribute("data-tooltip")?t.setAttribute("data-tooltip",a):"INPUT"===t.tagName||"TEXTAREA"===t.tagName?t.placeholder=a:t.innerHTML=a)})}function updateLangInterface(e,t){selectedLang.innerHTML=t,selectedLang.className=`header__selectedLanguage ${e}`,localStorage.setItem("userLang",e),localStorage.setItem("userLangText",t)}function initGoogleAutocomplete(e){const t=document.getElementById(e);if(!t)return;const n={componentRestrictions:{country:"pl"},fields:["address_components","geometry","icon","name","formatted_address"],types:["address"]};if("undefined"!=typeof google&&google.maps&&google.maps.places){const e=new google.maps.places.Autocomplete(t,n);e.addListener("place_changed",()=>{const t=e.getPlace();console.log("–í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å:",t.formatted_address)})}else console.warn("Google Maps API –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –∫–ª—é—á –Ω–µ–≤–µ—Ä–Ω—ã–π")}listItems.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-value"),t=this.textContent;selectedLang.textContent=t,selectedLang.className="header__selectedLanguage","ru"!==e&&selectedLang.classList.add(e),languageList.style.display="none",setTimeout(()=>{languageList.style.display=""},50)})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("serviceModal"),t=e.querySelector(".modal__title"),n=e.querySelector(".modal__description"),a=e.querySelector(".modal__close"),o=e.querySelector(".modal__overlay"),s=document.querySelectorAll(".services__item"),i=e.querySelectorAll(".js-close-modal");function r(){e.classList.remove("active"),document.body.style.overflow=""}s.forEach(a=>{a.addEventListener("click",()=>{!function(a){const o=localStorage.getItem("userLang")||"ru",s=translations[o]?.servicesData?.[a];s?(t.textContent=s.title,n.textContent=s.text,e.classList.add("active"),document.body.style.overflow="hidden"):console.error(`–ù–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–ª—è —É—Å–ª—É–≥–∏: ${a} –Ω–∞ —è–∑—ã–∫–µ ${o}`)}(a.getAttribute("data-service"))})}),a.addEventListener("click",r),o.addEventListener("click",r),i.forEach(e=>{e.addEventListener("click",r)}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&r()})}),listItems.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-value");updateLangInterface(e,this.innerHTML),translatePage(e),languageList.style.display="none",setTimeout(()=>{languageList.style.display=""},50)})}),document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("userLang"),t=localStorage.getItem("userLangText");if(e&&t)updateLangInterface(e,t),translatePage(e);else{let e=(navigator.language||navigator.userLanguage||"en").slice(0,2).toLowerCase();"uk"===e&&(e="ua");const t={ru:"RU",en:"EN",pl:"PL",ua:"UA"};t[e]?(updateLangInterface(e,t[e]),translatePage(e)):(updateLangInterface("en","EN"),translatePage("en"))}}),document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{initGoogleAutocomplete("addressFrom"),initGoogleAutocomplete("addressTo")},1e3)});